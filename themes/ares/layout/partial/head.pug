meta(charset="utf-8")
meta(name="X-UA-Compatible", content="IE=edge")
meta(name="viewport", content="width=device-width, initial-scale=1")

- var page_title = null 
- var page_description = null

if page.category
    - page_title = __('categories_title') + ' - ' + page.category
    - page_description = __('category_page_description', page.category)
else if page.tag
    - page_title = __('tags_title') + ' - ' + page.tag
    - page_description = __('tag_page_description', page.tag)
else if page.data && page.data[0]
    - page_title = page.data[0].title
    - page_description = page.data[0].description
else
    - page_title = page.title
    - page_description = page.description

- page_description = page_description || config.description || 'A Blog Powered By Hexo'

title
    block site_title
        if page_title
            = page_title + ' | ' + config.title
        else
            = config.title

block description
    meta(name="description", content=page_description)

link(rel="icon", href=url_for(theme.favicon))

link(rel="canonical", href=page.permalink)

//- Webmention
if theme.webmention && theme.webmention.domain
    link(rel="webmention", href=`https://webmention.io/${theme.webmention.domain}/webmention`)

link(rel="preload", href=url_for("fonts/opensans-regular-latin.woff2"), as="font", type="font/woff2", crossorigin="anonymous")

style.
  @font-face {
    font-family: 'Open Sans';
    src: url('#{url_for("fonts/opensans-regular-latin.woff2")}') format('woff2');
    font-weight: 400;
    font-style: normal;
    font-display: swap;
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    size-adjust: 107%;
    ascent-override: 97%;
    descent-override: 25%;
    line-gap-override: 0%;
  }

link(rel="stylesheet", href=url_for("css/ares.css"))

//- 条件加载webmention动态脚本
if config.webmention && config.webmention.enable && config.webmention.mode && config.webmention.mode !== 'static'
    script(src=url_for("js/purify.min.js"), defer)
    script(src=url_for("js/webmention-dynamic.js"), defer)

script(data-netlify-skip-bundle="true").
  (function() {
    const getInitialTheme = () => {
      const saved = localStorage.getItem('theme');
      if (saved && (saved === 'light' || saved === 'dark')) {
        return saved;
      }
      
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        return 'dark';
      }
      
      return 'light';
    };
    
    const theme = getInitialTheme();
    document.documentElement.setAttribute('data-theme', theme);
    
    document.documentElement.style.colorScheme = theme;
    
    // Add anti-flicker style for dark mode
    if (theme === 'dark') {
      const style = document.createElement('style');
      style.id = 'anti-flicker-style';
      style.innerHTML = `
        #page-wrapper[data-theme="dark"] {
          background-color: #0f172a;
          color: #f1f5f9;
        }
      `;
      document.head.appendChild(style);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      const pageWrapper = document.getElementById('page-wrapper');
      if (pageWrapper) {
        pageWrapper.setAttribute('data-theme', theme);
      }
    });
  })();


- const crossorigin = "anonymous";
